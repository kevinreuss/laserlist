<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LaserList - Laser Machines Overview across Manufacturers</title>
<style>
  input[type="number"], select {
  border: 2px solid #333; /* Stärkere Border im Einklang mit dem Button-Stil */
  padding: 10px; /* Mehr Padding für bessere Lesbarkeit */
  width: calc(100% - 24px); /* Anpassung der Breite unter Berücksichtigung von Padding und Border */
  border-radius: 5px; /* Abgerundete Ecken wie die Buttons */
  font-size: 16px; /* Größere Schrift für bessere Lesbarkeit */
  margin: 5px 0; /* Etwas Abstand zwischen den Elementen */
  box-sizing: border-box; /* Stellt sicher, dass Padding und Border innerhalb der angegebenen Breite enthalten sind */
}

/* Anpassungen für Mobilgeräte */
@media (max-width: 768px) {
  .filter-section input, 
  .filter-section select {
    width: 100%; /* Volle Breite in der mobilen Ansicht */
  }
  .filter-section {
    padding: 0 10px; /* Etwas Padding an den Seiten im mobilen Layout */
  }
}
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    background-color: #f4f4f4;
  }
  .machine-image {
    width: 100%;
    object-fit: contain;
  }
  .manufacturer-image {
    width: 50%!important;
    object-fit: contain;
  }
  
  header {
  background-color: #1DA1F2;
  color: #fff;
  padding: 20px;
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  display: flex;
  flex-direction: column;
  align-items: start;
  position: -webkit-sticky; /* Für Safari */
  position: sticky;
  top: 0;
  z-index: 1000; /* Stellt sicher, dass der Header über anderen Inhalten bleibt */
}

 .subscribe-button {
  background-color: #d21919; /* Twitter Blau */
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 5px;
  font-size: 16px;
  margin-top: 20px;
}

.subscribe-button-header {
  background-color: #d21919; /* Twitter Blau */
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 5px;
  font-size: 16px;
}





.more-info-button {
  background-color: white; /* Twitter Blau */
  color: black;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 5px;
  border: 1px solid #333;
  font-size: 16px;
}



.filter-button {
  background-color: #333; /* Twitter Blau */
  color: white;
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 5px;
  font-size: 16px;
  border: none;
}

.feedback-button {
  background-color: #ffffff; /* Twitter Blau */
  color: rgb(0, 0, 0);
  padding: 10px 20px;
  text-decoration: none;
  border-radius: 5px;
  font-size: 16px;
  border: none;
}


  .container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
    padding: 20px;
  }
  .card {
    background: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    border-radius: 8px;
    overflow: hidden;
    width: 300px;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .card img {
    width: 100%;
    object-fit: cover;
  }
  .card-content {
    width: 100%;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;    
  }
  .card-title {
    margin: 0;
    padding-bottom: 10px;
    padding-top: 20px;
    margin-top: 20px;
    border-top: 2px solid #eee;
  }
  .card-body {
    margin-top: 10px;
  }
  .laser-info {
    margin: 0px;
    padding: 0px;
    margin-top: 5px;
  }
  .filter {
    display: none;
  }
  .filter-section {
    text-align: center;
    margin: 5px 0;
  }
  .filter-section input {
    padding: 10px;
  }
  .filter-section select {
    padding: 10px;
  }
  .filter-section label {
    font-size: 18px;
  }
  .update-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 50px;
    padding-top: 50px;
    margin-top: 25px;
    background-color: #1DA1F2;
    color:#f4f4f4
  }
  .header-content {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .spinner {
  border: 4px solid rgba(0,0,0,.1);
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border-left-color: #09f;
  animation: spin 1s infinite linear;
}

#loadingSpinner {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  height: 100vh;
}


@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

</style>
<!-- Hotjar Tracking Code for https://kevinreuss.github.io/laserlist/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3917057,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
  
    <header>
  <div class="header-content">
  <!--<button id="openFilterSection" class="filter-button">Filter</button>-->
  <a href="mailto:kevreuss@gmail.com" target="_blank" class="feedback-button">Feedback?</a>
    <span>LaserList</span>
    <a href="https://forms.gle/TQKfFbRU5YnbDPK7A" target="_blank" class="subscribe-button-header">Subscribe</a>
    <!--<a href="https://twitter.com/kevreuss" target="_blank" class="feedback-button">Feedback?</a>-->
  </div>
  <div id="filterSection" class="filter">

  <div class="filter-section">
  <select id="manufacturerSelect">
    <option value="">All Manufacturers</option>
    <!-- Optionen werden hier dynamisch hinzugefügt -->
  </select>
</div>
<div class="filter-section">
  <select id="laserTypeSelect">
    <option value="">All Laser Source Types</option>
    <!-- Optionen werden hier dynamisch hinzugefügt -->
  </select>
</div>

<div class="filter-section">
  <input type="number" id="minPriceFilter" placeholder="Min Price in $">
  <input type="number" id="maxPriceFilter" placeholder="Max Price in $">
</div>
<div class="filter-section">
  <input type="number" id="minOperatingWidthFilter" placeholder="Min Operating Width in mm">
  <input type="number" id="maxOperatingWidthFilter" placeholder="Max Operating Width in mm">
</div>
<div class="filter-section">
  <input type="number" id="minOperatingHeightFilter" placeholder="Min Operating Height in mm">
  <input type="number" id="maxOperatingHeightFilter" placeholder="Max Operating Height in mm">
</div>
<div class="filter-section">
  <input type="number" id="minPowerInWFilter" placeholder="Min Power in W">
  <input type="number" id="maxPowerInWFilter" placeholder="Max Power in W">
</div>
<div class="filter-section">
  <button id="openFilterSection" class="filter-button" onclick="applyFilter()">Apply Filter</button>
</div>
</div>
</header>



<div id="loadingSpinner" style="display: none;">
  <p>Loading Machines...</p>
  <!-- Hier können Sie ein Spinner-Image einfügen oder einen reinen CSS-Spinner verwenden -->
  <div class="spinner"></div>
</div>

<div class="container" style="padding-bottom: 0px!important" id="containerLength"></div>

<div class="container" id="laserContainer">
  

  <!-- Cards will be inserted here -->
</div>

<section id="join">
  <div class="update-section">
      <a href="https://forms.gle/TQKfFbRU5YnbDPK7A" target="_blank" class="subscribe-button">Subscribe</a>
  </div>
</section>

<div id="legalSection" style="display: flex; flex-direction: column; padding: 20px; background-color: #333; align-items: end;">
  <button id="toggleLegalText" style="border:none; background-color: #333; color: white">Legal Information</button>
  <div id="legalText" style="display: none;">
    <a style="color: white" href="https://icons8.com/icon/2311/laser">Laser</a> icon by <a style="color: white" href="https://icons8.com">Icons8</a>
    </br>
    <a style="color: white" href="https://icons8.com/icon/1419/oberfläche">Oberfläche</a> icon by <a style="color: white" href="https://icons8.com">Icons8</a>
    </br>
    <a style="color: white" href="https://icons8.com/icon/202/banknoten">Banknoten</a> icon by <a style="color: white" href="https://icons8.com">Icons8</a>
    </br>
    <p style="color:white">
    THE INFORMATION CONTAINED IN THIS WEBSITE IS FOR GENERAL INFORMATION PURPOSES ONLY. THE INFORMATION IS PROVIDED BY LASER LIST AND WHILE WE ENDEAVOUR TO KEEP THE INFORMATION UP TO DATE AND CORRECT, WE MAKE NO REPRESENTATIONS OR WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED, ABOUT THE COMPLETENESS, ACCURACY, RELIABILITY, SUITABILITY OR AVAILABILITY WITH RESPECT TO THE WEBSITE OR THE INFORMATION, PRODUCTS, SERVICES, OR RELATED GRAPHICS CONTAINED ON THE WEBSITE FOR ANY PURPOSE. ANY RELIANCE YOU PLACE ON SUCH INFORMATION IS THEREFORE STRICTLY AT YOUR OWN RISK. IN NO EVENT WILL WE BE LIABLE FOR ANY LOSS OR DAMAGE INCLUDING WITHOUT LIMITATION, INDIRECT OR CONSEQUENTIAL LOSS OR DAMAGE, OR ANY LOSS OR DAMAGE WHATSOEVER ARISING FROM LOSS OF DATA OR PROFITS ARISING OUT OF, OR IN CONNECTION WITH, THE USE OF THIS WEBSITE. THROUGH THIS WEBSITE YOU ARE ABLE TO LINK TO OTHER WEBSITES WHICH ARE NOT UNDER THE CONTROL OF LASER LIST. WE HAVE NO CONTROL OVER THE NATURE, CONTENT AND AVAILABILITY OF THOSE SITES. THE INCLUSION OF ANY LINKS DOES NOT NECESSARILY IMPLY A RECOMMENDATION OR ENDORSE THE VIEWS EXPRESSED WITHIN THEM. EVERY EFFORT IS MADE TO KEEP THE WEBSITE UP AND RUNNING SMOOTHLY. HOWEVER, LASER LIST TAKES NO RESPONSIBILITY FOR, AND WILL NOT BE LIABLE FOR, THE WEBSITE BEING TEMPORARILY UNAVAILABLE DUE TO TECHNICAL ISSUES BEYOND OUR CONTROL.
  </p>
  
  </div>
</div>

<script>
  let laserMachines = [];

  function applyFilter() {
    filterMachines();
    var filterSection = document.getElementById('filterSection');
    if (filterSection.style.display === 'none') {
      filterSection.style.display = 'block';
    } else {
      filterSection.style.display = 'none';
    }
  }

  function populateSelectOptions(machines, key, selectId) {
  let options = machines.map(machine => machine[key])
                .filter((value, index, self) => self.indexOf(value) === index);
  
  const selectElement = document.getElementById(selectId);
  options.forEach(option => {
    const optElement = document.createElement('option');
    optElement.value = option;
    optElement.textContent = option;
    selectElement.appendChild(optElement);
  });
}

  document.addEventListener('DOMContentLoaded', function() {
    // Spinner anzeigen
    document.getElementById('loadingSpinner').style.display = 'flex';

    const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSaVhVavbtbNlv1MlgisjcqpxBckjufqXkmpiPj6nHmiAAfNyOGiCg50506F1anuJ0ABeIlylj2nZXL/pub?gid=0&single=true&output=csv'; // Ersetze dies mit der URL deines veröffentlichten CSV
    fetch(sheetUrl)
      .then(response => response.text())
      .then(csvText => Papa.parse(csvText, {header: true, skipEmptyLines: true}))
      .then(data => {
        laserMachines = data.data
        populateSelectOptions(laserMachines, 'manufacturer', 'manufacturerSelect');
        populateSelectOptions(laserMachines, 'laserType', 'laserTypeSelect');
        displayMachines(laserMachines);
        // Spinner ausblenden
        document.getElementById('loadingSpinner').style.display = 'none';
      })
      .catch(error => {
        console.error('Fehler beim Laden der Daten:', error)
        // Spinner ausblenden
        document.getElementById('loadingSpinner').style.display = 'none';
    });
  });

  document.getElementById('toggleLegalText').addEventListener('click', function() {
    var legalText = document.getElementById('legalText');
    if (legalText.style.display === 'none') {
      legalText.style.display = 'block';
    } else {
      legalText.style.display = 'none';
    }
  });

  document.getElementById('openFilterSection').addEventListener('click', function() {
    var filterSection = document.getElementById('filterSection');
    if (filterSection.style.display === 'block') {
      filterSection.style.display = 'none';
    } else {
      filterSection.style.display = 'block';
    }
  });


  function generateCard(machine) {
    let price = machine.priceInDollars ? `<b>~ $${machine.priceInDollars}</b>` : "individual pricing"
    let card = `
      <div class="card">
        <img style="object-fit: contain;" class="machine-image" src="${machine.modelImageUrl}" alt="${machine.model}">
        <img style="object-fit: contain;" class="manufacturer-image" src="${machine.manufacturerImageUrl}" alt="${machine.manufacturer}">
        <div class="card-content">
          <div>
            <h2 class="card-title">${machine.model}</h2>
            <div class="card-body">
              <p><a href="${machine.furtherInformationUrl}" target="_blank" class="more-info-button">Visit Page</a></p>
            </div>
          </div>
          `;

          if (machine.powerInW && machine.laserType) {
            card +=
          `<div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; padding-left: 10%; padding-right: 10%">
            <img style="width: auto!important; object-fit: auto!important" width="20%" src="https://img.icons8.com/ios/50/laser-beam.png" alt="laser-beam"/>
            <p class="laser-info" style="margin-bottom: 20px; margin-top: 20px; font-size: 24px; text-align: right">${machine.powerInW}W, ${machine.laserType}</p>
          </div>`}
          
          if (machine.powerInW && machine.laserType) {
            card +=
          `<div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; padding-left: 10%; padding-right: 10%">
            <img style="width: auto!important; object-fit: auto!important; height: 50%!important" width="20%" src="https://img.icons8.com/metro/26/surface.png" alt="surface"/>
            <p class="laser-info" style="margin-bottom: 20px; margin-top: 20px; font-size: 24px; text-align: right">${machine.operatingWidthInMm}mm x ${machine.operatingHeightInMm}mm`
          if (machine.passthrough && machine.passthrough === 'TRUE') {
            card += ` (passthrough)`
          }
          card +=  `</p></div>`
        }
          
            card +=
          `<div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; padding-left: 10%; padding-right: 10%">
            <img style="width: auto!important; object-fit: auto!important" width="20%" src="https://img.icons8.com/ios/50/banknotes.png" alt="banknotes"/>
            <p class="laser-info" style="margin-bottom: 20px; margin-top: 20px; font-size: 24px; text-align: right">${price}</p>
          </div>`

          card +=
         ` 
        </div>
      </div>
    `;

    return card;
  }

  function sortMachines(machines) {
    return machines;
  return machines.sort((a, b) => {
    if (a.manufacturer < b.manufacturer) return -1;
    if (a.manufacturer > b.manufacturer) return 1;
    // Wenn Hersteller gleich sind, nach Preis sortieren
    const aPrice = parseInt(a.priceRange.split(' - ')[0].replace('€', '').trim());
    const bPrice = parseInt(b.priceRange.split(' - ')[0].replace('€', '').trim());
    return aPrice - bPrice;
  });
}

function displayMachines(machines) {
  const sortedMachines = sortMachines(machines); // Sortiere die Maschinen
  const container = document.getElementById('laserContainer');
  container.innerHTML = ''; // Bereinige den bestehenden Inhalt
  if (sortedMachines.length !== 0) {
    const containerLength = document.getElementById('containerLength');
    containerLength.innerHTML = `<p>showing ${sortedMachines.length} machines</p>`;
  }
  sortedMachines.forEach(machine => {
    container.innerHTML += generateCard(machine);
  });
}

  function filterMachines() {
    const manufacturer = document.getElementById('manufacturerSelect').value;
    const laserType = document.getElementById('laserTypeSelect').value;
    const minPrice = document.getElementById('minPriceFilter').value;
    const maxPrice = document.getElementById('maxPriceFilter').value;
    const minOperatingWidth = document.getElementById('minOperatingWidthFilter').value;
    const maxOperatingWidth = document.getElementById('maxOperatingWidthFilter').value;
    const minOperatingHeight = document.getElementById('minOperatingHeightFilter').value;
    const maxOperatingHeight = document.getElementById('maxOperatingHeightFilter').value;
    const minPowerInW = document.getElementById('minPowerInWFilter').value;
    const maxPowerInW = document.getElementById('maxPowerInWFilter').value;

    const filteredMachines = laserMachines.filter(machine => {
      const manufacturerFits = manufacturer === '' || machine.manufacturer === manufacturer;
      const laserTypeFits = laserType === '' || machine.laserType === laserType;
      const priceFits = (minPrice === '' || parseInt(machine.priceInDollars) >= parseInt(minPrice)) && (maxPrice === '' || parseInt(machine.priceInDollars) <= parseInt(maxPrice));
      const operatingWidthFits = (minOperatingWidth === '' || parseInt(machine.operatingWidthInMm) >= parseInt(minOperatingWidth)) && (maxOperatingWidth === '' || parseInt(machine.operatingWidthInMm) <= parseInt(maxOperatingWidth));
      const operatingHeightFits = (minOperatingHeight === '' || parseInt(machine.operatingHeightInMm) >= parseInt(minOperatingHeight)) && (maxOperatingHeight === '' || parseInt(machine.operatingHeightInMm) <= parseInt(maxOperatingHeight));
      const powerInWFits = (minPowerInW === '' || parseInt(machine.powerInW) >= parseInt(minPowerInW)) && (maxPowerInW === '' || parseInt(machine.powerInW) <= parseInt(maxPowerInW));
      return manufacturerFits && laserTypeFits && priceFits && operatingWidthFits && operatingHeightFits && powerInWFits;
    });

    displayMachines(filteredMachines);
  }

  document.addEventListener('DOMContentLoaded', () => {
    displayMachines(laserMachines);
  });
</script>

</body>
</html

